%YAML 1.1
---
Atmosphere Driver:
  Initial Conditions:
    Initial Conditions File: ./data/init_ne4np4.nc
    # Set X_prev = X
    T_mid_prev: T_mid
    horiz_winds_prev: horiz_winds
    w_int: 0.0 # Start from zero vert velocity
    w_int_prev: 0.0

  Atmosphere Processes:
    Number of Entries: 5
    Schedule Type: Sequential
    Process 0:
      Process Name: Homme
      Grid:         Dynamics
    Process 1:
      Process Name: P3
      Grid:         Physics GLL
    Process 2:
      Process Name: SHOC
      Grid:         Physics GLL
    Process 3:
      Process Name: P3
      Grid: Physics GLL
    Process 4:
      Process Name: RRTMGP
      Grid: Physics GLL
      active_gases: ["H2O", "CO2", "O3", "N2O", "CO" , "CH4", "O2", "N2"]
  Grids Manager:
    Type: Dynamics Driven
    Reference Grid: Physics GLL
    Dynamics Driven:
      Dynamics Namelist File Name: ./data/theta.nl

SCREAM:

  Start Date: 01-01-2000 # For CIME cases, do NOT set this! It will be set by CIME's RUN_STARTDATE

  # Model Timesteps
  whole_model_dt: 3600.0 #aka phys/dyn coupling dt

  # Number of sub or supersteps of whole_model_dt for given proc.
  # maybe have positive nums be supersteps and negative numbers being
  # number of substeps? This might require a generalization of substepping
  # since everything except rad always substeps and rad always supersteps?
  # There's also an issue here where AMB just
  # rejiggered dyn's substepping to be ~resolution invariant. Maybe
  # use that impl for all substeps?
  n_turb_steps: 1
  n_micro_steps: 1
  n_rad_steps: 1
  dt_remap_factor: 2
  dt_tracer_factor:  6

  Tuning Parameters:
    SHOC:
      Ckh_s_def: 0.1 #using "moderate-stable"
      Ckm_s_def: 0.1 #vals here as used by
      Ck_s_min: 0.1  #DYAMOND2 SCREAMv0 run
      #there will definitely eventually be more

    P3:
      mu_r_constant: 1.0
      p3_qc_accret_expon: 1.15
      p3_qc_autocon_expon: 2.47
      #there will definitely eventually be more

  Well-Mixed Greenhouse Gases:
    co2vmr: 367.000000e-6
    ch4vmr: 1751.022e-9
    n2ovmr: 315.85e-9
    f11vmr: 676.0526e-12
    f12vmr: 537.05e-12

  Code Options:
    include_subgrid_variability: true
    enable_T_warnings: true

  Input Files:
    input_root                  : default # this will default to DIN_LOC_ROOT for the current machine

    # The filepaths below will be prepended with $input_root unless the path looks absolute
    atm_ic_file                 : atm/cam/inic/homme/cami_mam3_Linoz_ne4np4_L72_c160909.nc
    topog_file                  : atm/cam/topo/USGS-gtopo30_ne4np4pg2_16x_converted.c20200527.nc
    #SPA has a different file for each month of the year, so just give directory
    spa_file_dir                : atm/cam/rad/
    ice_optics_file             : atm/cam/physprops/iceoptics_c080917.nc
    liq_optics_file             : atm/cam/physprops/F_nwvl200_mu20_lam50_res64_t298_c080428.nc
    rrtmgp_coefficients_file_lw : atm/cam/rad/rrtmgp_coefficients_lw_20181204.nc
    rrtmgp_coefficients_file_sw : atm/cam/rad/rrtmgp_coefficients_sw_20181204.nc
    solar_data_file             : atm/cam/solar/spectral_irradiance_Lean_1976-2007_ave_c20160517.nc
    micro_p3_lookup_dir         : atm/cam/physprops

    solar_data_ymd : 20000101
    solar_data_forcing : constant

    micro_p3_tableversion : 4.1.1

  Output Files:
    # This should be a bracketed list of all the output control yaml files

# Note: HOMME settings will be translated into data/theta.nl
HOMME:
  ctl_nl:
    vthreads               : 1
    NThreads               : 1
    partmethod             : 4
    topology               : cube
    test_case              : jw_baroclinic
    u_perturb              : 1
    rotate_grid            : 0
    ne                     : 2
    qsize                  : 1
    nmax                   : 24
    statefreq              : 9999
    restartfreq            : 43200
    restartfile            : ./R0001
    runtype                : 0
    mesh_file              : /dev/null
    tstep                  : 600
    rsplit                 : 3
    qsplit                 : 1
    integration            : explicit
    smooth                 : 0
    nu                     : 7e15
    nu_div                 : 7e15
    nu_p                   : 7e15
    nu_q                   : 7e15
    nu_s                   : -1
    nu_top                 : 2.5e5
    se_ftype               : 0
    limiter_option         : 9
    vert_remap_q_alg       : 1
    hypervis_scaling       : 0
    hypervis_order         : 2
    hypervis_subcycle      : 1
    hypervis_subcycle_tom  : 0
    theta_hydrostatic_mode : true
    theta_advect_form      : 1
    tstep_type             : 5
    moisture               : notdry

  solver_nl:
    precon_method : identity
    maxits        : 500
    tol           : 1.e-9

  filter_nl:
    filter_type   : taylor
    transfer_type : bv
    filter_freq   : 0
    filter_mu     : 0.04D0
    p_bv          : 12.0D0
    s_bv          : .666666666666666666D0
    wght_fm       : 0.10D0
    kcut_fm       : 2

  vert_nl:
    vform     : ccm
    vfile_mid : ./data/scream-72m.ascii
    vfile_int : ./data/scream-72i.ascii

  prof_inparm:
    profile_outpe_num   : 100
    profile_single_file : .true.

  analysis_nl:
     interp_gridtype   : 2
     output_timeunits  : 1,1
     output_start_time : 0,0
     output_end_time   : 30000,30000
     output_varnames1  : ps,zeta,u,v,T
     output_varnames2  : Q,Q2,Q3,Q4
     io_stride         : 8
     output_type       : netcdf
...
